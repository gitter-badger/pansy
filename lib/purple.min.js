/*! PURPLE.js v0.4.5 2015-05-14 */
!function(a){function b(a,b){function c(a){function b(a){var b=d.apps[a]={name:a,middleware:[],list:{},conf:{},currentHref:null,prevHref:null,set:function(a,b){this.conf[a]=b},get:function(a){return this.conf[a]},use:function(a){b.middleware.push(a)},go:function(a){function c(){f._end||(e.length>0?e.shift()(f,g,c):g.end())}var d=b.list[a],e=b.middleware.concat(d.fns),f={_end:!1,query:{},rawUrl:"",paths:[]},g={end:function(){f._end=!0}};c()},back:function(){},route:function(a){if(a instanceof Array)var c=new RegExp("/"+a.join("/")+"/");else if(a instanceof String)var c=new RegExp("/"+a+"/");else{if(!(a instanceof RegExp))return!1;var c=a}var d=b.list[c]={regexp:c,get:function(){var a=Array.call(null,arguments);d.fns=a}};return d}};return b}return 0===arguments.length?null!==d.mainApp?d.apps[d.mainApp]:d.apps.__anonymous:"undefined"!=typeof d.apps[a]?d.apps[a]:b(a)}var d={template:{},dom:{},mainApp:null,apps:{__anonymous:{}},conf:{scope:"/"}};return c.node=function(a,b){function c(a){var b=document.createElement("div");return b.innerHTML=a,b.firstChild}function e(a){return a.hide=function(){this.style.display="none"},a.show=function(){this.style.display="inherit"},a}if("undefined"!=typeof stringDom)var f=d.node[nodename]=c(d.template[b]);else var f=d.node[nodename];return e(f)},c.set=function(a,b){d.conf[a]=b},c.get=function(a){return d.conf[a]},c.start=function(){for(var a=document.scripts,b=0;b<a.length;b++){var e=document.scripts[b];"text/template"===e.type&&(d.template[e.attributes.getNamedItem("data-name").value]=e.innerText)}window.onpopstate=function(){var a=location.href;c.getMainapp().go(a)}},c}"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(a,c)}):a.purple=b(a,jQuery)}(this);