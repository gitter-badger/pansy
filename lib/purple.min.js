/*! PURPLE.js v0.4.5 2015-05-14 */
!function(a){function b(a,b){function c(a){function b(a){var b=g.apps[a]={name:a,middleware:[],list:{},conf:{},currentHref:null,prevHref:null,set:function(a,b){this.conf[a]=b},get:function(a){return this.conf[a]},use:function(a){b.middleware.push(a)},go:function(a){function c(){f._end||(e.length>0?e.shift()(f,g,c):g.end())}var d=b.list[a],e=b.middleware.concat(d.fns),f={_end:!1,query:{},rawUrl:"",paths:[]},g={end:function(){f._end=!0}};c()},back:function(){},route:function(a){if(e(a))var c=new RegExp("/"+a.join("/")+"/");else if(d(a))var c=new RegExp("/"+a+"/");else{if(!f(a))return!1;var c=a}var g=b.list[c]={regexp:c,get:function(){var a=Array.call(null,arguments);g.fns=a}};return g}};return b}return 0===arguments.length?null!==g.mainApp?g.apps[g.mainApp]:g.apps.__anonymous:"undefined"!=typeof g.apps[a]?g.apps[a]:b(a)}function d(a){return"string"==typeof a}function e(a){return a instanceof Array}function f(a){return a instanceof RegExp}var g={template:{},dom:{},mainApp:null,apps:{__anonymous:{}},conf:{scope:"/"}};return c.set=function(a,b){g.conf[a]=b},c.get=function(a){return g.conf[a]},c.start=function(){for(var a=document.scripts,b=0;b<a.length;b++){var d=document.scripts[b];"text/template"===d.type&&(g.template[d.attributes.getNamedItem("data-name").value]=d.innerText)}window.onpopstate=function(){var a=location.href;c.getMainapp().go(a)}},c.node=function(a,b){function c(a){var b=document.createElement("div");return b.innerHTML=a,b.firstChild}function d(a){return a.hide=function(){this.style.display="none"},a.show=function(){this.style.display="inherit"},a}if("undefined"!=typeof stringDom)var e=g.node[nodename]=c(g.template[b]);else var e=g.node[nodename];return d(e)},c.debug=function(){return g},c}"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(a,c)}):a.purple=b(a,jQuery)}(this);